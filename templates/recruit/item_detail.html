{% load static %}
<!DOCTYPE html><!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Feb 23 2022 10:53:24 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="618524aabcfddbd5c962ab37" data-wf-site="617535a9a5e669803b8ca566">
<head>
  <meta charset="utf-8">
  <title>ジョブワールド　求人詳細</title>
  <meta content="Job" property="og:title">
  <meta content="Job" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="{% static 'css/normalize.css' %}" rel="stylesheet" type="text/css">
  <link href="{% static 'css/webflow.css' %}" rel="stylesheet" type="text/css">
  <link href="{% static 'css/sakis-template.webflow.css' %}" rel="stylesheet" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="{% static 'images/logo-2.png' %}" rel="shortcut icon" type="image/png">
  <link href="{% static 'images/logo-2.png' %}" rel="apple-touch-icon">
</head>
<body>
  <div class="page-wrapper">
    <div class="section wf-section">
      <div class="container gray">
        <div>
          <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="w-nav">
            <div class="nav-section">
              <div class="nav-section-left">
                <a href="{% url 'index' %}" class="brand w-nav-brand"><img src="{% static 'images/logo-2.png' %}" loading="lazy" width="67" alt=""></a>
              </div>
              <div class="nav-section-right">
                <div class="nav-block">
                  <div class="nav-block-sub">
                    <div class="nav-lavel">
                      {% if request.user.is_authenticated %}
                        <p>[ログイン中です] email: {{ user.email }}</p>
                      {% else %}
                        <a href="{% url 'account_signup' %}" class="nav_button w-button">無料会員登録</a>
                      {% endif %}
                    </div>
                    <div class="nav-lavel nav_lavel_small_hide">
                      {% if request.user.is_authenticated %}
                          <a href="{% url 'account_logout' %}" class="nav_button w-button">ログアウト</a>
                      {% else %}
                          <a href="{% url 'account_login' %}" class="nav_button w-button">ログイン</a>
                      {% endif %}
                    </div>
 
                   {% if request.user.is_authenticated %}
                    <div class="nav_label_small">
                      <a href="{% url 'account_logout' %}" class="nav_button_small_logout w-button"></a>
                    </div>
                    {% else %}
                    <div class="nav_label_small">
                      <a href="{% url 'account_login' %}" class="nav_button_small w-button"></a><!--スマホのログアウトボタン -->
                    </div>
                    {% endif %} 
                  </div>
                  <nav role="navigation" class="nav-menu w-nav-menu">
                    <a href="{% url 'recruit:item' %}" class="nav-link-2 w-nav-link">求人検索</a>
                    <a href="{% url 'index' %}" class="nav-link-4 w-nav-link">Home</a>
                  </nav>
                  <div class="w-nav-button">
                    <div class="w-icon-nav-menu"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="section wf-section">
      <div class="container">
        <div class="job_detail_color_figure_section">
          <div class="color_figure_wrap"></div>
          <div class="div-block-50 color_figure_wrap"></div>
          <div class="div-block-51 color_figure_wrap"></div>
          <div class="div-block-52 color_figure_wrap"></div>
          <div class="div-block-53 color_figure_wrap"></div>
          <div class="div-block-53-copy color_figure_wrap"></div>
        </div>
      </div>
    </div>
    <div class="section wf-section">
      <div class="container job_detail_container_orange">
        <div class="job_detail_width">
          <div class="job_detail_up">
            <div class="job_detail_taitle_width">
              <div class="job_detail_title_wrap">
                <div class="job_detail_title">{{item.name}}</div>
              </div>
              <div class="job_detail_subtitle_wrap">
                <div class="job_detail_subtitle">{{item.sub_title| default:""}}</div>
              </div>
            </div>
            <div class="job_detail_image_block">
              <div class="job_detail_image_wrap"><img src="{{item.image1.url}}" loading="lazy" sizes="(max-width: 479px) 29vw, (max-width: 991px) 27vw, 235.421875px" alt="" class="job_detai_image"></div>
              <div class="job_detail_image_wrap"><img src="{{item.image2.url}}" loading="lazy" sizes="(max-width: 479px) 29vw, (max-width: 991px) 27vw, 235.421875px"  alt="" class="job_detai_image"></div>
              <div class="job_detail_image_wrap"><img src="{{item.image3.url}}" loading="lazy" sizes="(max-width: 479px) 29vw, (max-width: 991px) 27vw, 235.421875px"  alt="" class="job_detai_image job_image_hide"></div>
            </div>
            <div class="job_detail_infomation_width">
              <div class="job_detail_infomation_class_title_text">仕事内容</div>
              <div class="job_detail_infomation_class_div">
                <div>{{item.description| default:"" | linebreaksbr }}</div>
              </div>
            </div>
          </div>
          <div class="job_detail_width_block2_p">
            <div>
              <div class="job_detail_width_block2_c">
                <div class="job_detail_infomation_block">
                  <div class="job_detail_infomation_class_title">
                    <div class="job_detail_infomation_class_title_text">求人基本情報</div>
                  </div>
                  <div class="job_detail_infomation_sentence_section">
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">雇用形態</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.employment_status| default:""}}</div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">勤務地</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.location| default:""}}</div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">給料</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.salary| default:""}}</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="job_detail_infomation_block">
                  <div class="job_detail_infomation_class_title">
                    <div class="job_detail_infomation_class_title_text">就業情報</div>
                  </div>
                  <div class="job_detail_infomation_sentence_section">
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">勤務時間</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.working_hours| default:""}}</div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">休日・休暇</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.holidays| default:""}}</div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">待遇・福利厚生</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.welfare| default:""}}</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="job_detail_infomation_block">
                  <div class="job_detail_infomation_class_title">
                    <div class="job_detail_infomation_class_title_text">募集要項</div>
                  </div>
                  <div class="job_detail_infomation_sentence_section">
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">求めている人材</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">
                          {% for wanted_talent in item.wanted_talent.all %}   
                            {{ wanted_talent.talent }}  <br> 
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">採用人数</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.number_hired| default:""}}</div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">選考内容</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.selection| default:""}}</div>
                      </div>
                    </div>
                    <div class="job_detail_infomation_sentence_div">
                      <div class="job_detail_infomation_sentence_label">
                        <div class="job_detail_infomation_sentence_label_text">応募締切</div>
                      </div>
                      <div class="job_detail_infomation_sentence">
                        <div class="job_detail_infomation_sentence_text">{{item.closing_date| default:""}}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="job_detail_button_block w-clearfix">
            <input 
            style="border: 2px solid #333; margin-bottom:10px"
            type="button" 
            name="favoriteItem" 
            {% if item.is_favorited %}
              class="liked_button w-button" 
              value="いいね済" 
            {% else %}
              class="like_button w-button" 
              value="いいね！" 
            {% endif %} 
            data-item_id="{{ item.id }}">

            <a href="{% url 'recruit:entry'%}?id={{item.id}}" class="link-block-3-copy-copy w-inline-block">
              <div class="jobdetail_main_button">
                <div class="div-block-46-copy">
                  <div>エントリー</div>
                </div>
                <div class="div-block-45-copy-copy-copy"></div>
              </div>
            </a>
            <a href="#" class="link-block-3-copy-copy job_detail_consultation_hide w-inline-block">
              <div class="jobdetail_main_button">
                <div class="div-block-46">
                  <div>カウンセラーに<br>相談する</div>
                </div>
                <div class="div-block-45-copy-copy"></div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="section wf-section">
      <div class="container dots">
        <div>
          <div class="fotter-section">
            <div class="footer-flex-container">
              <a href="{% url 'index' %}" class="footer-logo-link"><img src="{% static 'images/logo-2.png' %}" alt="" class="footer-image"></a>
              <div class="div-block-43">
                <h2 class="footer-heading">Job World</h2>
                <ul role="list" class="w-list-unstyled">
                  <li>
                    <a href="#" class="footer-link">運営会社</a>
                  </li>
                  <li>
                    <a href="#" class="footer-link">プライバシーポリシー</a>
                  </li>
                </ul>
              </div>
              <div>
                <h2 class="footer-heading">Contact</h2>
                <div class="text-block-9">TEL:03-3367-3045</div>
              </div>
              <div class="div-block-16">
                <h2 class="footer-heading">Office</h2>
                <div class="text-block-8">〒169-0074<br>東京都新宿区北新宿1-7-20<br>プロスペリタ新宿302</div>
              </div>
            </div>
            <div class="text-block-7">Copyright 2021 Magic World株式会社(マジックワールド株式会社)</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=617535a9a5e669803b8ca566" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{% static 'js/webflow.js' %}" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>


<script>
  const CSRF_TOKEN = "{{ csrf_token }}";

  for (let elm of document.getElementsByName("favoriteItem")) {
    elm.addEventListener("click", (e) => {
      //ログインしていない場合は会員登録へ
      {% if request.user.is_authenticated %}
        favoriteItem(e.target.dataset.item_id);
        e.target.value = "いいね済";
        e.target.classList.remove('like_button');
        e.target.classList.add('liked_button');
      {% else %}
        window.location.href = "{% url 'account_signup' %}"
      {% endif %}

    });
  }
  async function favoriteItem(itemId) {
    const postData = JSON.stringify({
      item_id: itemId,
    });
    res = await executeAPI("api/item_favorite", postData, "POST");
    if (res) {

    }
  }

  async function executeAPI(url, body, method) {
    try {
      const headers = {
        "content-type": "application/json",
        "X-CSRFToken": CSRF_TOKEN,
      };
      const res = await fetch(url, {
        method: method,
        headers: headers,
        body: body,
      });
      if (res.status >= 200 && res.status < 300) {
        console.log(res);
        return await res;
      } else {
        alert("APIエラー");
        console.log(res);
        return null;
      }
    } catch (e) {
      console.log(e);
      return null;
    }
  }

  $('input').click(function() {
    console.log('クリックされました！');
  })
</script>