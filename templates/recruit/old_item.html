{% extends 'base.html' %} 
{% load widget_tweaks %} 
{% load static %} 
{% block title %}求人検索{% endblock %}
 {% block og_title %}Search Job{% endblock %} 
 {% block twitter_title %}Search Job{% endblock %}
{% block header %} {% comment %}
<h1>求人一覧画面</h1>
{% endcomment %} {% endblock %} 
{% block contents %} 

{% comment %} <div>
    求人件数: {{ items.count }} 件
    </div>

    <label>
        {% for item in items %}
            <div>
                {{ item.name }}
                <input 
                    type="button" 
                    name="favoriteItem" 
                    {% if item.is_favorited %} value="いいね済" {% else %} value="いいね！" {% endif %} 
                    data-item_id="{{ item.id }}">
            </div>
        {% endfor %}
    </label>
{% endblock %} 
{% endcomment %}

{% if items.has_previous %}
 <a href="?page={{ items.previous_page_number }}">&lt; 前のページ</a>
{% else %}
 <span>&lt; 前のページ</span>
{% endif %}
{{ items.number }}ページ

{% if items.has_next %}
 <a href="?page={{ items.next_page_number }}">次のページ &gt;</a>
{% else %}
 <span>次のページ &gt;</span>
{% endif %}


<div class="page-wrapper w-container">
  <div class="section wf-section">
    <div class="container">
      <div class="lp_main">
        <div class="left-section">
          <div class="job-search-section">
            <div class="div-block-20">
              <div class="text-block-10">検索条件を設定</div>
            </div>
            <div class="search-column">
              <div class="w-form">
                <form>
                  {{ form }}
                  <input type="submit" value="検索" class="button-3 w-button">
               </form>
                <form
                  id="email-form-4"
                  name="email-form-4"
                  data-name="Email Form 4"
                  method="get"
                >
                  <input
                    type="text"
                    class="text-field w-input"
                    maxlength="256"
                    name="Search-Word-2"
                    data-name="Search Word 2"
                    placeholder="検索ワード"
                    id="Search-Word-2"
                    required=""
                  />
                  <select
                    name="Search-Field-4"
                    id="Search-Field-4"
                    data-name="Search Field 4"
                    class="select-field-job w-select"
                  >
                    <option value="">雇用形態</option>
                    <option value="First">正社員</option>
                    <option value="Second">アルバイト・パート</option>
                    <option value="Third">派遣社員</option>
                    <option value="Another option">契約社員</option>
                    <option value="Another option">業務委託</option>
                    <option value="Another option">新卒</option>
                    <option value="Another option">インターン</option>
                    <option value="Another option">請負</option>
                    <option value="Another option">嘱託社員</option>
                    <option value="Another option">ボランティア</option>
                  </select>
                  <select
                    name="Search-Field-2"
                    id="Search-Field-2"
                    data-name="Search Field 2"
                    class="select-field-job w-select"
                  >
                    <option value="">業界</option>
                    <option value="First">
                      IT/Web・通信・インターネット系
                    </option>
                    <option value="Second">
                      マスコミ・エンターテインメント・メディア系
                    </option>
                    <option value="Third">サービス系</option>
                    <option value="Another option">製造・メーカー系</option>
                    <option value="Another option">
                      コンサルティング・リサーチ
                    </option>
                    <option value="Another option">
                      商社（卸売）・流通・小売系
                    </option>
                    <option value="Another option">金融・保険系</option>
                    <option value="Another option">不動産・建設系</option>
                    <option value="Another option">その他</option>
                  </select>
                  <select
                    name="Search-Field-2"
                    id="Search-Field-2"
                    data-name="Search Field 2"
                    class="select-field-job w-select"
                  >
                    <option value="">職種</option>
                    <option value="First">営業</option>
                    <option value="Another option">事務・管理</option>
                    <option value="Second">
                      企画・マーケティング・経営・管理職
                    </option>
                    <option value="Third">Web・インターネット・ゲーム</option>
                    <option value="Another option">
                      クリエイティブ（メディア・アパレル・デザイン）
                    </option>
                    <option value="Another option">
                      専門職（コンサルタント・士業・金融・不動産）
                    </option>
                    <option value="Another option">
                      ITエンジニア（システム開発・SE・インフラ）
                    </option>
                    <option value="Another option">
                      エンジニア（機械・電気・電子・半導体・制御）
                    </option>
                    <option value="Another option">
                      素材・化学・食品・医療品技術職
                    </option>
                    <option value="Another option">建築・土木技術職</option>
                    <option value="Another option">医療・福祉・介護</option>
                    <option value="Another option">
                      教育・保育・公務員・農林水産・その他
                    </option>
                  </select>
                  <select
                    name="Search-Field-3"
                    id="Search-Field-3"
                    data-name="Search Field 3"
                    class="select-field-job w-select"
                  >
                    <option value="">勤務地</option>
                    <option value="First">First Choice</option>
                    <option value="Second">Second Choice</option>
                    <option value="Third">Third Choice</option>
                  </select>
                  <label class="w-checkbox search-checkbox-field">
                    <input
                      type="checkbox"
                      id="checkbox-3"
                      name="checkbox-3"
                      data-name="Checkbox 3"
                      class="w-checkbox-input"
                    />
                    <span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-3"
                      >未経験OK</span
                    >
                  </label>
                  <label class="w-checkbox search-checkbox-field">
                    <input
                      type="checkbox"
                      id="checkbox-2"
                      name="checkbox-2"
                      data-name="Checkbox 2"
                      class="w-checkbox-input"
                    />
                    <span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-2"
                      >週休2日</span
                    ></label
                  ><label class="w-checkbox search-checkbox-field"
                    ><input
                      type="checkbox"
                      id="checkbox-2"
                      name="checkbox-2"
                      data-name="Checkbox 2"
                      class="w-checkbox-input"
                    /><span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-2"
                      >土日休み</span
                    ></label
                  ><label class="w-checkbox search-checkbox-field"
                    ><input
                      type="checkbox"
                      id="checkbox-2"
                      name="checkbox-2"
                      data-name="Checkbox 2"
                      class="w-checkbox-input"
                    /><span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-2"
                      >年間休日120日</span
                    ></label
                  ><label class="w-checkbox search-checkbox-field"
                    ><input
                      type="checkbox"
                      id="checkbox-2"
                      name="checkbox-2"
                      data-name="Checkbox 2"
                      class="w-checkbox-input"
                    /><span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-2"
                      >転勤なし</span
                    ></label
                  ><label class="w-checkbox search-checkbox-field"
                    ><input
                      type="checkbox"
                      id="checkbox-2"
                      name="checkbox-2"
                      data-name="Checkbox 2"
                      class="w-checkbox-input"
                    /><span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-2"
                      >残業20h以内</span
                    ></label
                  ><label class="w-checkbox search-checkbox-field"
                    ><input
                      type="checkbox"
                      id="checkbox-2"
                      name="checkbox-2"
                      data-name="Checkbox 2"
                      class="w-checkbox-input"
                    /><span
                      class="search-checkbox-label w-form-label"
                      for="checkbox-2"
                      >昇給・昇格あり</span
                    ></label
                  ><input
                    type="submit"
                    value="この条件で検索する"
                    data-wait="Please wait..."
                    class="job_search_button w-button"
                  />
                </form>
                <div class="w-form-done">
                  <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                  <div>
                    Oops! Something went wrong while submitting the form.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="lp_right">
          <div class="color_figure_section">
            <div class="color_figure_wrap"></div>
            <div class="div-block-50 color_figure_wrap"></div>
            <div class="div-block-51 color_figure_wrap"></div>
            <div class="div-block-52 color_figure_wrap"></div>
            <div class="div-block-53 color_figure_wrap"></div>
            <div class="div-block-54 color_figure_wrap"></div>
          </div>
          <div class="searchjob_slider_wrap">
            <div class="searchjob_section_title">
              <div class="searchjob_title_text">おすすめ求人</div>
            </div>
            <div
              data-delay="4000"
              data-animation="slide"
              class="slider-2 w-slider"
              data-autoplay="false"
              data-easing="ease"
              data-hide-arrows="false"
              data-disable-swipe="false"
              data-autoplay-limit="0"
              data-nav-spacing="3"
              data-duration="500"
              data-infinite="true"
            >
              <div class="mask-2 w-slider-mask">
                <div class="slide-3 w-slide">
                  <div class="searchjob_slider">
                    <div class="searchjob_slider_up">
                      <div class="search_job_slider_image_wrap">
                        <img
                          src="images/pema-lama-Nq91gpjYskQ-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 479px) 44vw, (max-width: 767px) 40vw, (max-width: 991px) 205.15625px, 212.34375px"
                          srcset="
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-500.jpeg   500w,
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-800.jpeg   800w,
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-1080.jpeg 1080w,
                            images/pema-lama-Nq91gpjYskQ-unsplash.jpg         3707w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                      <div class="search_job_slider_image_wrap">
                        <img
                          src="images/barney-yau-BbGuVc9YTaw-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 479px) 44vw, (max-width: 767px) 40vw, (max-width: 991px) 205.15625px, 212.34375px"
                          srcset="
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-500.jpeg   500w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-800.jpeg   800w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-1080.jpeg 1080w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-1600.jpeg 1600w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-2000.jpeg 2000w,
                            images/barney-yau-BbGuVc9YTaw-unsplash.jpg         4240w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                      <div
                        class="search_job_slider_image_wrap searchjob_slider_image_hide"
                      >
                        <img
                          src="images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 767px) 100vw, (max-width: 991px) 205.15625px, 212.34375px"
                          srcset="
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-1080.jpeg 1080w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-1600.jpeg 1600w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-2000.jpeg 2000w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-2600.jpeg 2600w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-3200.jpeg 3200w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash.jpg         4896w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                    </div>
                    <div class="searchjob_slider_middle">
                      <div class="searchjob_slider_middle_left">
                        <div class="searchjob_slider_left_sentence">
                          <div class="text-block-23">
                            東京都内/全国に拠点を構える人材会社/22年新卒正社員採用/研修専門部署有り/風通しの良さ◎
                          </div>
                          <div class="text-block-24">
                            東京都内/全国に拠点を構える人材会社/22年新卒正社員採用/研修専門部署有り/風通しの良さ◎
                          </div>
                          <div class="text-block-24-copy">
                            企画・マーケティング
                          </div>
                        </div>
                      </div>
                      <div class="searchjob_slider_middle_middle">
                        <div class="search_job_slider_sentence_line"></div>
                      </div>
                      <div class="searchjob_slider_middle_right">
                        <div class="searchjob_slider_right_sentence">
                          <div class="job-search-sentence-right-div">
                            <div class="job-search-sentence-right-label-div">
                              <div class="job-search-sentence-right-label">
                                勤務地
                              </div>
                            </div>
                            <div class="job-search-sentence-right-text-div">
                              <div class="job-search-sentence-right-text">
                                東京23区
                              </div>
                            </div>
                          </div>
                          <div class="job-search-sentence-right-div">
                            <div class="job-search-sentence-right-label-div">
                              <div class="job-search-sentence-right-label">
                                年収
                              </div>
                            </div>
                            <div class="job-search-sentence-right-text-div">
                              <div class="job-search-sentence-right-text">
                                400〜800万
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="searchjob_slider_down w-clearfix">
                      <a href="#" class="link-block-3-copy w-inline-block">
                        <div class="top_main_button-copy">
                          <div class="div-block-46">
                            <div>いいね!を送る</div>
                          </div>
                          <div class="div-block-45"></div>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
                <div class="slide-3-copy w-slide">
                  <div class="searchjob_slider">
                    <div class="searchjob_slider_up">
                      <div class="search_job_slider_image_wrap">
                        <img
                          src="images/pema-lama-Nq91gpjYskQ-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 479px) 44vw, (max-width: 767px) 40vw, (max-width: 991px) 205.15625px, 212.34375px"
                          srcset="
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-500.jpeg   500w,
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-800.jpeg   800w,
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-1080.jpeg 1080w,
                            images/pema-lama-Nq91gpjYskQ-unsplash.jpg         3707w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                      <div class="search_job_slider_image_wrap">
                        <img
                          src="images/barney-yau-BbGuVc9YTaw-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 479px) 44vw, (max-width: 767px) 40vw, (max-width: 991px) 205.15625px, 212.34375px"
                          srcset="
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-500.jpeg   500w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-800.jpeg   800w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-1080.jpeg 1080w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-1600.jpeg 1600w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-2000.jpeg 2000w,
                            images/barney-yau-BbGuVc9YTaw-unsplash.jpg         4240w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                      <div
                        class="search_job_slider_image_wrap searchjob_slider_image_hide"
                      >
                        <img
                          src="images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 767px) 100vw, (max-width: 991px) 205.15625px, 212.34375px"
                          srcset="
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-1080.jpeg 1080w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-1600.jpeg 1600w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-2000.jpeg 2000w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-2600.jpeg 2600w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-3200.jpeg 3200w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash.jpg         4896w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                    </div>
                    <div class="searchjob_slider_middle">
                      <div class="searchjob_slider_middle_left">
                        <div class="searchjob_slider_left_sentence">
                          <div class="text-block-23">
                            東京都内/全国に拠点を構える人材会社/22年新卒正社員採用/研修専門部署有り/風通しの良さ◎
                          </div>
                          <div class="text-block-24">
                            東京都内/全国に拠点を構える人材会社/22年新卒正社員採用/研修専門部署有り/風通しの良さ◎
                          </div>
                          <div class="text-block-24-copy">
                            企画・マーケティング
                          </div>
                        </div>
                      </div>
                      <div class="searchjob_slider_middle_middle">
                        <div class="search_job_slider_sentence_line"></div>
                      </div>
                      <div class="searchjob_slider_middle_right">
                        <div class="searchjob_slider_right_sentence">
                          <div class="job-search-sentence-right-div">
                            <div class="job-search-sentence-right-label-div">
                              <div class="job-search-sentence-right-label">
                                勤務地
                              </div>
                            </div>
                            <div class="job-search-sentence-right-text-div">
                              <div class="job-search-sentence-right-text">
                                東京23区
                              </div>
                            </div>
                          </div>
                          <div class="job-search-sentence-right-div">
                            <div class="job-search-sentence-right-label-div">
                              <div class="job-search-sentence-right-label">
                                年収
                              </div>
                            </div>
                            <div class="job-search-sentence-right-text-div">
                              <div class="job-search-sentence-right-text">
                                400〜800万
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="searchjob_slider_down w-clearfix">
                      <a href="#" class="link-block-3-copy w-inline-block">
                        <div class="top_main_button-copy">
                          <div class="div-block-46">
                            <div>いいね!を送る</div>
                          </div>
                          <div class="div-block-45"></div>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
                <div class="slide-4 w-slide"></div>
              </div>
              <div class="left-arrow w-slider-arrow-left">
                <div class="w-icon-slider-left"></div>
              </div>
              <div class="right-arrow w-slider-arrow-right">
                <div class="w-icon-slider-right"></div>
              </div>
              <div class="slide-nav w-slider-nav w-round"></div>
            </div>
          </div>
          <div class="search_job_section">
            <div class="lp_middle">
              <div class="searchjob_w">
                <div class="lp_pickup_title">
                  <div class="lp_pickup_title_text">
                    求人一覧　{{ item_cnt }} 件
                  </div>
                </div>
                <div class="w-layout-grid searchjob_grid">
                  {% for item in items %}
                  <div class="searchjob_section">
                    <div class="searchjob_slider_up">
                      <div class="search_job_slider_image_wrap">
                        <img
                          src="images/pema-lama-Nq91gpjYskQ-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 479px) 42vw, (max-width: 767px) 38vw, (max-width: 991px) 194.90625px, 201.71875px"
                          srcset="
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-500.jpeg   500w,
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-800.jpeg   800w,
                            images/pema-lama-Nq91gpjYskQ-unsplash-p-1080.jpeg 1080w,
                            images/pema-lama-Nq91gpjYskQ-unsplash.jpg         3707w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                      <div class="search_job_slider_image_wrap">
                        <img
                          src="images/barney-yau-BbGuVc9YTaw-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 479px) 42vw, (max-width: 767px) 38vw, (max-width: 991px) 194.90625px, 201.71875px"
                          srcset="
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-500.jpeg   500w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-800.jpeg   800w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-1080.jpeg 1080w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-1600.jpeg 1600w,
                            images/barney-yau-BbGuVc9YTaw-unsplash-p-2000.jpeg 2000w,
                            images/barney-yau-BbGuVc9YTaw-unsplash.jpg         4240w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                      <div
                        class="search_job_slider_image_wrap searchjob_slider_image_hide"
                      >
                        <img
                          src="images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash.jpg"
                          loading="lazy"
                          sizes="(max-width: 767px) 100vw, (max-width: 991px) 194.90625px, 201.71875px"
                          srcset="
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-1080.jpeg 1080w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-1600.jpeg 1600w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-2000.jpeg 2000w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-2600.jpeg 2600w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash-p-3200.jpeg 3200w,
                            images/aleksandra-sapozhnikova-r_-zzXrnzxI-unsplash.jpg         4896w
                          "
                          alt=""
                          class="search_job_slider_image"
                        />
                      </div>
                    </div>
                    <div class="searchjob_slider_middle">
                      <div class="searchjob_slider_middle_left">
                        <div class="searchjob_slider_left_sentence">
                          <div class="text-block-23">
                            {{item.name}}
                          </div>
                          <div class="text-block-24">
                            {{item.sub_title}}
                          </div>
                          <div class="text-block-24-copy">
                            {{item.sector}}
                          </div>
                        </div>
                      </div>
                      <div class="searchjob_slider_middle_middle">
                        <div class="search_job_slider_sentence_line"></div>
                      </div>
                      <div class="searchjob_slider_middle_right">
                        <div class="searchjob_slider_right_sentence">
                          <div class="job-search-sentence-right-div">
                            <div class="job-search-sentence-right-label-div">
                              <div class="job-search-sentence-right-label">
                                勤務地
                              </div>
                            </div>
                            <div class="job-search-sentence-right-text-div">
                              <div class="job-search-sentence-right-text">
                                {{item.location}}
                              </div>
                            </div>
                          </div>
                          <div class="job-search-sentence-right-div">
                            <div class="job-search-sentence-right-label-div">
                              <div class="job-search-sentence-right-label">
                                年収
                              </div>
                            </div>
                            <div class="job-search-sentence-right-text-div">
                              <div class="job-search-sentence-right-text">
                                {{item.salary}}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="searchjob_slider_down w-clearfix">
                      <a href="#" class="link-block-3-copy w-inline-block">
                        <div class="top_main_button-copy">
                          <div class="div-block-46">
                            <div>いいね!を送る</div>
                          </div>
                          <div class="div-block-45"></div>
                        </div>
                      </a>
                      <input 
                      type="button" 
                      name="favoriteItem" 
                      {% if item.is_favorited %} value="いいね済" {% else %} value="いいね！" {% endif %} 
                      data-item_id="{{ item.id }}">
                    </div>
                    <a href="{% url 'recruit:item_detail'%}?id={{item.id}}">詳細</a>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script
  src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=61e55ce68a57ef6b2fcb97ff"
  type="text/javascript"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"
></script>
<script src="{% static 'js/webflow.js' %}" type="text/javascript"></script>

{% endblock %} 
{% block scripts %}
<script>
  const CSRF_TOKEN = "{{ csrf_token }}";

  for (let elm of document.getElementsByName("favoriteItem")) {
    elm.addEventListener("click", (e) => {
      //ログインしていない場合は会員登録へ
      {% if request.user.is_authenticated %}
        favoriteItem(e.target.dataset.item_id);
        e.target.value = "いいね済";
      {% else %}
        window.location.href = "{% url 'account_signup' %}"
      {% endif %}

    });
  }
  async function favoriteItem(itemId) {
    const postData = JSON.stringify({
      item_id: itemId,
    });
    res = await executeAPI("api/item_favorite", postData, "POST");
    if (res) {

    }
  }

  async function executeAPI(url, body, method) {
    try {
      const headers = {
        "content-type": "application/json",
        "X-CSRFToken": CSRF_TOKEN,
      };
      const res = await fetch(url, {
        method: method,
        headers: headers,
        body: body,
      });
      if (res.status >= 200 && res.status < 300) {
        return await res;
      } else {
        alert("APIエラー");
        console.log(res);
        return null;
      }
    } catch (e) {
      console.log(e);
      return null;
    }
  }
</script>
{% endblock %}
